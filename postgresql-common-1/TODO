postgresql TODO
===============

Things that need doing in the new PostgreSQL packaging for Debian.


Man pages are installed in /usr/share/postgresql<X.X>/man.  Provide a
program to be run by the postinst script to run update-alternatives
on every manpage to link it to /usr/share/man/man<X>/<page>

Make do.maintenance version-specific.  It needs to check
/etc/postgresql/cluster.ports in order to find out which ports to run a
vacuum on and /var/run/postgresql/.s.PGSQL.${PGPORT} to be sure the
postmaster for that port is running.

Write a utility to change the port on which a particular postmaster
is running or to create a database and start a postmaster on some
new port:
a.    Prompt for current port (if any);
b.    If current port is not blank:
       shutdown the postmaster on that port
       look up PostgreSQL version from
       /etc/postgresql/cluster.ports
       prompt for new port
       move /etc/postgresql/<oldport> to .../<newport>
       edit /etc/postgresql/<newport>/postgresql.conf 
   else
       prompt for: cluster.ports parameters
       write line in cluster.ports
       create /etc/postgresql/<newport>
       initdb
       move $PGDATA/config files to /etc/postgresql/<newport> and
	 create symlinks in their place
       
c.    Start postmaster on the new port

postgresql-contribx.x need to check a file supplied by
postgresql-common to see whether and with what parameters to run
autovacuum.

Do we need separate pam files in each source package?

Should we do a general debconf query for all pg versions? rather than
one per source package?

Write manpages for: pg_lsclusters

add $CONFDIR/port, add support for that in pg_{create,start}cluster and
pg_lscclusters, prefer this in init scripts

determine db version of the default port in pg_wrapper

